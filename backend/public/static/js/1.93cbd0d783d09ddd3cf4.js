webpackJsonp([1],{Xmjn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s);var n={data:function(){return{tableData:[],dialogTableVisible:!1,gridDesc:[{desc:"",prob:""}],gridData:[{name:"",time:"",age:"",sex:"",thxhdb:"",gaxztm:"",rstqm:"",dmdzdb:"",qbdb:"",ns1:"",ns2:"",zdgc:"",zdzs:"",zdhs:"",zdb:"",qdb:"",gysz:"",bqb:"",bdb:"",zjdhs:"",jxlsm:"",jg:"",jsjm:"",djzm:"",zdba:"",ptt:"",zzdba1:"",zzdbb:"",jjdhs:"",gmdzdb:""}],metrics:[["姓名","name"],["日期","time"],["年龄","age"],["性别","sex"],["糖化血红蛋白","thxhdb"],["γ-谷氨酰转肽酶","gaxztm"],["乳酸脱氢酶","rstqm"],["低密度脂蛋白","dmdzdb"],["前白蛋白","qbdb"],["尿素","ns1"],["尿酸","ns2"],["总胆固醇","zdgc"],["总胆汁酸","zdzs"],["总胆红素","zdhs"],["总蛋白","zdb"],["球蛋白","qdb"],["甘油三脂","gysz"],["白球比","bqb"],["白蛋白","bdb"],["直接胆红素","zjdhs"],["碱性磷酸酶","jxlsm"],["肌酐","jg"],["肌酸激酶","jsjm"],["胆碱脂酶","djzm"],["脂蛋白(a)","zdba"],["葡萄糖","ptt"],["载脂蛋白A1","zzdba1"],["载脂蛋白B","zzdbb"],["间接胆红素","jjdhs"],["高密度脂蛋白","gmdzdb"]]}},created:function(){this.getBaseList()},methods:{getBaseList:function(){var t=this;fetch("http://127.0.0.1:3000/sql/getList",{method:"post"}).then(function(t){return t.json()}).then(function(e){t.tableData=[];for(var a={},s=e.length-1;s>=0&&s>=e.length-15;s--)a.time=e[s].time,a.name=e[s].name,a.isDesc=1==e[s].isDesc?"是":"否",a.desc=e[s].desc,a.isExam=1==e[s].isExam?"是":"否",a.prob=(100*e[s].prob).toFixed(2)+"%",a.level=e[s].prob>.3?e[s].prob>.6?"高":"中":"低",t.tableData.push(a),a={}})},handleDetail:function(t,e){var a,s=this;"否"!=e.isExam?(a={time:e.time},fetch("http://127.0.0.1:3000/sql/getExam",{method:"post",body:r()(a),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})).then(function(t){for(var a in t[0])s.gridData[0][a]=t[0][a];s.gridDesc[0].desc=e.desc,s.gridDesc[0].prob=e.prob,s.dialogTableVisible=!0}):this.$alert("该患者没有输入体检数据。","体检数据",{})},handleDelete:function(t,e){var a,s=this;(a={time:e.time,isExam:e.isExam},fetch("http://127.0.0.1:3000/sql/deleteHis",{method:"post",body:r()(a),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})).then(function(e){200==e.code?(s.$alert(e.msg,"操作结果",{}),s.tableData.splice(t,1),s.getBaseList()):s.$alert(e.msg,"操作结果",{})})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"time",label:"记录时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isDesc",label:"是否输入症状描述",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.desc))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{type:"是"===e.row.isDesc?"primary":"danger","disable-transitions":""}},[t._v(t._s(e.row.isDesc))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"isExam",label:"是否输入体检数据",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"是"===e.row.isExam?"primary":"danger","disable-transitions":""}},[t._v(t._s(e.row.isExam))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"患糖尿病风险等级",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.prob))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{type:"高"===e.row.level?"danger":"中"===e.row.level?"primary":"success","disable-transitions":""}},[t._v(t._s(e.row.level))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleDetail(e.$index,e.row)}}},[t._v("体检数据")]),t._v(" "),a("el-dialog",{attrs:{title:"体检数据",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.gridDesc}},[a("el-table-column",{attrs:{prop:"desc",label:"症状描述",width:"450"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prob",label:"患病风险",width:"150"}})],1),t._v(" "),a("el-table",{attrs:{data:t.gridData}},t._l(t.metrics,function(t,e){return a("el-table-column",{attrs:{property:t[1],label:t[0],width:"150"}})}),1)],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除记录")])]}}])})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,l,!1,function(t){a("gagg")},null,null);e.default=i.exports},gagg:function(t,e){},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var s=a("FeBl"),r=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}}});
//# sourceMappingURL=1.93cbd0d783d09ddd3cf4.js.map